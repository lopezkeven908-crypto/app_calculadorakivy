<CalculadoraLayout>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: [12, 12, 12, 12]
        spacing: 12

        BoxLayout:  # Cabecera: imagen + título
            size_hint_y: None
            height: root.height * 0.12
            padding: 10
            spacing: 10

            Image:
                source: 'ID2227887.png'
                size_hint_x: None
                width: self.height
                allow_stretch: True

            Label:
                text: 'Calculadora Cbta131'
                font_size: '20sp'
                color: 1, 1, 1, 1
                halign: 'left'
                valign: 'middle'
                text_size: self.size

        Label:  # Pantalla de resultado
            id: result
            text: '0'
            font_size: '35sp'
            size_hint_y: None
            height: root.height * 0.18
            color: 1, 1, 1, 1
            halign: 'right'
            valign: 'middle'
            text_size: self.width - 20, self.height

        GridLayout:  # Botones organizados en 4 columnas con separación uniforme
            cols: 4
            spacing: [12, 12]
            padding: [0, 0, 0, 0]
            size_hint_y: 0.6

            # Primera fila
            Button:
                text: 'AC'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0, 0, 0, 0
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: 'C'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0, 0, 0, 0
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '÷'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0, 0, 0, 0
                canvas.before:
                    Color:
                        rgba: 0.172, 0.580, 0.580, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '√'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0, 0, 0, 0
                canvas.before:
                    Color:
                        rgba: 0.172, 0.580, 0.580, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            # Segunda fila
            Button:
                text: '7'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '8'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '9'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '×'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.172, 0.580, 0.580, 1
                canvas.before:
                    Color:
                        rgba: 0.172, 0.580, 0.580, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            # Tercera fila
            Button:
                text: '4'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '5'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '6'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '-'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.172, 0.580, 0.580, 1
                canvas.before:
                    Color:
                        rgba: 0.172, 0.580, 0.580, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            # Cuarta fila
            Button:
                text: '1'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '2'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '3'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '+'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.172, 0.580, 0.580, 1
                canvas.before:
                    Color:
                        rgba: 0.172, 0.580, 0.580, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            # Quinta fila
            Button:
                text: '0'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.180, 0.227, 0.384, 1
                canvas.before:
                    Color:
                        rgba: 0.180, 0.227, 0.384, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '='
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 1, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: 1, 0, 0, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '.'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.172, 0.580, 0.580, 1
                canvas.before:
                    Color:
                        rgba: 0.172, 0.580, 0.580, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]

            Button:
                text: '^'
                font_size: '18sp'
                on_press: root.on_button_press(self)
                background_normal: ''
                background_color: 0.172, 0.580, 0.580, 1
                canvas.before:
                    Color:
                        rgba: 0.172, 0.580, 0.580, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [12]